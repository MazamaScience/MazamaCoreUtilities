<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a POSIXct date range — dateRange • MazamaCoreUtils</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create a POSIXct date range — dateRange" />
<meta property="og:description" content="Uses incoming parameters to return a pair of POSIXct times in the
proper order. The first returned time will be midnight of the desired
starting date. The second returned time will represent the &quot;end of the day&quot;
of the requested or calculated enddate boundary.
Note that the returned end date will be one unit prior to the start
of the requested enddate unless ceilingEnd = TRUE in
which case the entire enddate will be included up to the last
unit.
The ceilingEnd argument addresses the ambiguity of a phrase like:
&quot;August 1-8&quot;. With ceilingEnd = FALSE (default) this pharse means
&quot;through the beginning of Aug 8&quot;. With ceilingEnd = TRUE it means
&quot;through the end of Aug 8&quot;.
So, to get 24 hours of data staring on Jan 01, 2019 you would specify:

&amp;gt; MazamaCoreUtils::dateRange(20190101, 20190102, timezone = &quot;UTC&quot;)
[1] &quot;2019-01-01 00:00:00 UTC&quot; &quot;2019-01-01 23:59:59 UTC&quot;


or

&amp;gt; MazamaCoreUtils::dateRange(20190101, 20190101,
                             timezone = &quot;UTC&quot;, ceilingEnd = TRUE)
[1] &quot;2019-01-01 00:00:00 UTC&quot; &quot;2019-01-01 23:59:59 UTC&quot;


The required timezone parameter must be one of those found in
OlsonNames.
Dates can be anything that is understood by
lubrdiate::parse_date_time() using the Ymd[HMS] orders. This
includes:

&quot;YYYYmmdd&quot;
&quot;YYYYmmddHHMMSS&quot;
&quot;YYYY-mm-dd&quot;
&quot;YYYY-mm-dd H&quot;
&quot;YYYY-mm-dd H:M&quot;
&quot;YYYY-mm-dd H:M:S&quot;

" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MazamaCoreUtils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/cache-management.html">Cache Managment</a>
    </li>
    <li>
      <a href="../articles/date-parsing.html">Date Parsing</a>
    </li>
    <li>
      <a href="../articles/error-handling.html">Error Handling</a>
    </li>
    <li>
      <a href="../articles/logging.html">Logging</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/MazamaScience/MazamaCoreUtils">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a POSIXct date range</h1>
    <small class="dont-index">Source: <a href='https://github.com/MazamaScience/MazamaCoreUtils/blob/master/R/dateRange.R'><code>R/dateRange.R</code></a></small>
    <div class="hidden name"><code>dateRange.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Uses incoming parameters to return a pair of <code>POSIXct</code> times in the
proper order. The first returned time will be midnight of the desired
starting date. The second returned time will represent the "end of the day"
of the requested or calculated <code>enddate</code> boundary.</p>
<p>Note that the returned end date will be one <code>unit</code> prior to the start
of the requested <code>enddate</code> unless <code>ceilingEnd = TRUE</code> in
which case the entire <code>enddate</code> will be included up to the last
<code>unit</code>.</p>
<p>The <code>ceilingEnd</code> argument addresses the ambiguity of a phrase like:
"August 1-8". With <code>ceilingEnd = FALSE</code> (default) this pharse means
"through the beginning of Aug 8". With <code>ceilingEnd = TRUE</code> it means
"through the end of Aug 8".</p>
<p>So, to get 24 hours of data staring on Jan 01, 2019 you would specify:</p>
<pre>
&gt; MazamaCoreUtils::dateRange(20190101, 20190102, timezone = "UTC")
[1] "2019-01-01 00:00:00 UTC" "2019-01-01 23:59:59 UTC"
</pre>

<p>or</p>
<pre>
&gt; MazamaCoreUtils::dateRange(20190101, 20190101,
                             timezone = "UTC", ceilingEnd = TRUE)
[1] "2019-01-01 00:00:00 UTC" "2019-01-01 23:59:59 UTC"
</pre>

<p>The required <code>timezone</code> parameter must be one of those found in
<code><a href='https://rdrr.io/r/base/timezones.html'>OlsonNames</a></code>.</p>
<p>Dates can be anything that is understood by
<code>lubrdiate::parse_date_time()</code> using the <code>Ymd[HMS]</code> orders. This
includes:</p>
<ul>
<li><p><code>"YYYYmmdd"</code></p></li>
<li><p><code>"YYYYmmddHHMMSS"</code></p></li>
<li><p><code>"YYYY-mm-dd"</code></p></li>
<li><p><code>"YYYY-mm-dd H"</code></p></li>
<li><p><code>"YYYY-mm-dd H:M"</code></p></li>
<li><p><code>"YYYY-mm-dd H:M:S"</code></p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>dateRange</span>(<span class='kw'>startdate</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>enddate</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>timezone</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>unit</span> <span class='kw'>=</span> <span class='st'>"sec"</span>, <span class='kw'>ceilingEnd</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>days</span> <span class='kw'>=</span> <span class='fl'>7</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>startdate</th>
      <td><p>Desired start datetime (ISO 8601).</p></td>
    </tr>
    <tr>
      <th>enddate</th>
      <td><p>Desired end datetime (ISO 8601).</p></td>
    </tr>
    <tr>
      <th>timezone</th>
      <td><p>Olson timezone used to interpret dates (required).</p></td>
    </tr>
    <tr>
      <th>unit</th>
      <td><p>Units used to determine time at end-of-day.</p></td>
    </tr>
    <tr>
      <th>ceilingEnd</th>
      <td><p>Logical instruction to apply
<code><a href='http://lubridate.tidyverse.org/reference/round_date.html'>ceiling_date</a></code> to the <code>enddate</code> rather than
<code><a href='http://lubridate.tidyverse.org/reference/round_date.html'>floor_date</a></code></p></td>
    </tr>
    <tr>
      <th>days</th>
      <td><p>Number of days of data to include.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A vector of two <code>POSIXct</code>s.</p>
    <h2 class="hasAnchor" id="default-arguments"><a class="anchor" href="#default-arguments"></a>Default Arguments</h2>

    

<p>In the case when either <code>startdate</code> or <code>enddate</code> is missing, it is
created from the non-missing values plus/minus <code>days</code>. If both
<code>startdate</code> and <code>enddate</code> are misssing, <code>enddate</code> is set to
<code><a href='http://lubridate.tidyverse.org/reference/now.html'>now</a></code> (with the given <code>timezone</code>), and then
<code>startdate</code> is calculated using <code>enddate - days</code>.</p>
    <h2 class="hasAnchor" id="end-of-day-units"><a class="anchor" href="#end-of-day-units"></a>End-of-Day Units</h2>

    

<p>The second of the returned <code>POSIXct</code>s will end one <code>unit</code> before
the specified <code>enddate</code>. Acceptable units are <code>"day",
"hour", "min", "sec"</code>.</p>
<p>The aim is to quickly calculate full-day date ranges for time series whose
values are binned at different units. Thus, if <code>unit = "min"</code>, the
returned value associated with <code>enddate</code> will always be at 23:59:00
in the requested time zone.</p>
    <h2 class="hasAnchor" id="posixct-inputs"><a class="anchor" href="#posixct-inputs"></a>POSIXct inputs</h2>

    

<p>When <code>startdate</code> or <code>enddate</code> are already <code>POSIXct</code> values,
they are converted to the timezone specified by <code>timezone</code> without
altering the physical instant in time the input represents. This is different
from the behavior of <code><a href='http://lubridate.tidyverse.org/reference/parse_date_time.html'>parse_date_time</a></code> (which powers
this function), which will force <code>POSIXct</code> inputs into a new timezone,
altering the physical moment of time the input represents.</p>
    <h2 class="hasAnchor" id="parameter-precedence"><a class="anchor" href="#parameter-precedence"></a>Parameter precedence</h2>

    

<p>It is possible to supply input paramters that are in conflict. For example:</p>
<p><code>dateRange("2019-01-01", "2019-01-08", days = 3, timezone = "UTC")</code></p>
<p>The <code>startdate</code> and <code>enddate</code> parameters would imply a 7-day range
which is in conflict with <code>days = 3</code>. The following rules resolve
conflicts of this nature:</p>
<ol>
<li><p>When <code>startdate</code> and <code>enddate</code> are both specified, the
<code>days</code> parameter is ignored.</p></li>
<li><p>When <code>startdate</code> is missing, the first returned time will depend
on the combination of <code>enddate</code>, <code>days</code> and <code>ceilingEnd</code>.</p></li>
<li><p>When <code>enddate</code> is missing, <code>ceillingEnd</code> is ignored and the
second returned time depends on <code>days</code>.</p></li>
</ol>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>dateRange</span>(<span class='st'>"2019-01-08"</span>, <span class='kw'>timezone</span> <span class='kw'>=</span> <span class='st'>"UTC"</span>)</div><div class='output co'>#&gt; [1] "2019-01-08 00:00:00 UTC" "2019-01-14 23:59:59 UTC"</div><div class='input'><span class='fu'>dateRange</span>(<span class='st'>"2019-01-08"</span>, <span class='kw'>unit</span> <span class='kw'>=</span> <span class='st'>"min"</span>, <span class='kw'>timezone</span> <span class='kw'>=</span> <span class='st'>"UTC"</span>)</div><div class='output co'>#&gt; [1] "2019-01-08 00:00:00 UTC" "2019-01-14 23:59:00 UTC"</div><div class='input'><span class='fu'>dateRange</span>(<span class='st'>"2019-01-08"</span>, <span class='kw'>unit</span> <span class='kw'>=</span> <span class='st'>"hour"</span>, <span class='kw'>timezone</span> <span class='kw'>=</span> <span class='st'>"UTC"</span>)</div><div class='output co'>#&gt; [1] "2019-01-08 00:00:00 UTC" "2019-01-14 23:00:00 UTC"</div><div class='input'><span class='fu'>dateRange</span>(<span class='st'>"2019-01-08"</span>, <span class='kw'>unit</span> <span class='kw'>=</span> <span class='st'>"day"</span>, <span class='kw'>timezone</span> <span class='kw'>=</span> <span class='st'>"UTC"</span>)</div><div class='output co'>#&gt; [1] "2019-01-08 UTC" "2019-01-15 UTC"</div><div class='input'><span class='fu'>dateRange</span>(<span class='st'>"2019-01-08"</span>, <span class='st'>"2019-01-11"</span>, <span class='kw'>timezone</span> <span class='kw'>=</span> <span class='st'>"UTC"</span>)</div><div class='output co'>#&gt; [1] "2019-01-08 00:00:00 UTC" "2019-01-10 23:59:59 UTC"</div><div class='input'><span class='fu'>dateRange</span>(<span class='kw'>enddate</span> <span class='kw'>=</span> <span class='fl'>20190112</span>, <span class='kw'>days</span> <span class='kw'>=</span> <span class='fl'>3</span>,
          <span class='kw'>unit</span> <span class='kw'>=</span> <span class='st'>"day"</span>, <span class='kw'>timezone</span> <span class='kw'>=</span> <span class='st'>"America/Los_Angeles"</span>)</div><div class='output co'>#&gt; [1] "2019-01-09 PST" "2019-01-12 PST"</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#default-arguments">Default Arguments</a></li>
      <li><a href="#end-of-day-units">End-of-Day Units</a></li>
      <li><a href="#posixct-inputs">POSIXct inputs</a></li>
      <li><a href="#parameter-precedence">Parameter precedence</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jonathan Callahan, Spencer Pease, Thomas Bergamaschi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


