<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Error message generator — stopOnError • MazamaCoreUtils</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Error message generator — stopOnError" />
<meta property="og:description" content="When writing R code for use in production systems, it is
important to enclose chunks of code inside of try() blocks. This is
especially important when processing user input or data obtained from web
services which may fail for a variety of reasons. If any problems arise
within a try() block, it is important to generate informative and
consistent error messages.
Over the years, we have developed our own standard protocol for error handling
that is easy to understand, easy to implement, and allows for consistent
generation of error messages. To goal is to make it easy for developers to test
sections of code that might fail and to create more uniform, more informative
error messages than those that might come from deep within the R execution stack.
In addition to the generation of custom error messages, use of prefix
allows for the creation of classes of errors that can be detected and handled
appropriately as errors propagate to other functions." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MazamaCoreUtils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.12</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/MazamaScience/MazamaCoreUtils/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Error message generator</h1>
    <small class="dont-index">Source: <a href='https://github.com/MazamaScience/MazamaCoreUtils/blob/master/R/errorHandling.R'><code>R/errorHandling.R</code></a></small>
    <div class="hidden name"><code>stopOnError.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>When writing R code for use in production systems, it is
important to enclose chunks of code inside of <code><a href='https://rdrr.io/r/base/try.html'>try()</a></code> blocks. This is
especially important when processing user input or data obtained from web
services which may fail for a variety of reasons. If any problems arise
within a <code><a href='https://rdrr.io/r/base/try.html'>try()</a></code> block, it is important to generate informative and
consistent error messages.</p>
<p>Over the years, we have developed our own standard protocol for error handling
that is easy to understand, easy to implement, and allows for consistent
generation of error messages. To goal is to make it easy for developers to test
sections of code that might fail and to create more uniform, more informative
error messages than those that might come from deep within the <span style="R">R</span> execution stack.</p>
<p>In addition to the generation of custom error messages, use of <code>prefix</code>
allows for the creation of classes of errors that can be detected and handled
appropriately as errors propagate to other functions.</p>
    </div>

    <pre class="usage"><span class='fu'>stopOnError</span><span class='op'>(</span>
  <span class='va'>result</span>,
  err_msg <span class='op'>=</span> <span class='st'>""</span>,
  prefix <span class='op'>=</span> <span class='st'>""</span>,
  maxLength <span class='op'>=</span> <span class='fl'>500</span>,
  truncatedLength <span class='op'>=</span> <span class='fl'>120</span>,
  call. <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>result</th>
      <td><p>Return from a <code><a href='https://rdrr.io/r/base/try.html'>try()</a></code> block.</p></td>
    </tr>
    <tr>
      <th>err_msg</th>
      <td><p>Custom error message.</p></td>
    </tr>
    <tr>
      <th>prefix</th>
      <td><p>Text string to add in front of the error message.</p></td>
    </tr>
    <tr>
      <th>maxLength</th>
      <td><p>Maximum length of an error message. Error messages
beyond this limit will be truncated.</p></td>
    </tr>
    <tr>
      <th>truncatedLength</th>
      <td><p>Length of the output error message.</p></td>
    </tr>
    <tr>
      <th>call.</th>
      <td><p>Logical indicating whether the call should become part of the error message.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Issues a <code><a href='https://rdrr.io/r/base/stop.html'>stop()</a></code> with an appropriate error message.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>If logging has been initialized, the customized/modified error message
will be logged with <code><a href='logger.error.html'>logger.error(err_msg)</a></code> before issuing
<code><a href='https://rdrr.io/r/base/stop.html'>stop(err_msg)</a></code>.</p>
<p>The following examples show how to use this function:</p>
<pre>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/MazamaScience/MazamaCoreUtils'>MazamaCoreUtils</a></span><span class='op'>)</span>


<span class='co'># Arbitrarily deep in the stack we might have:</span>

<span class='va'>myFunc</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
<span class='op'>}</span>


<span class='co'># Simple usage</span>

<span class='va'>userInput</span> <span class='op'>&lt;-</span> <span class='fl'>10</span>
<span class='va'>result</span> <span class='op'>&lt;-</span> <span class='kw'><a href='https://rdrr.io/r/base/try.html'>try</a></span><span class='op'>(</span><span class='op'>{</span>
  <span class='fu'>myFunc</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>userInput</span><span class='op'>)</span>
<span class='op'>}</span>, silent <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'>stopOnError</span><span class='op'>(</span><span class='va'>result</span><span class='op'>)</span>

<span class='va'>userInput</span> <span class='op'>&lt;-</span> <span class='st'>"ten"</span>
<span class='va'>result</span> <span class='op'>&lt;-</span> <span class='kw'><a href='https://rdrr.io/r/base/try.html'>try</a></span><span class='op'>(</span><span class='op'>{</span>
  <span class='fu'>myFunc</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>userInput</span><span class='op'>)</span>
<span class='op'>}</span>, silent <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'>stopOnError</span><span class='op'>(</span><span class='va'>result</span><span class='op'>)</span>


<span class='co'># More concise code with the '%&gt;%' operator</span>

<span class='kw'><a href='https://rdrr.io/r/base/try.html'>try</a></span><span class='op'>(</span><span class='op'>{</span>
  <span class='fu'>myFunc</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>userInput</span><span class='op'>)</span>
<span class='op'>}</span>, silent <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
<span class='fu'>stopOnError</span><span class='op'>(</span><span class='va'>result</span>, err_msg <span class='op'>=</span> <span class='st'>"Unable to process user input"</span><span class='op'>)</span>

<span class='kw'><a href='https://rdrr.io/r/base/try.html'>try</a></span><span class='op'>(</span><span class='op'>{</span>
  <span class='fu'>myFunc</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>userInput</span><span class='op'>)</span>
<span class='op'>}</span>, silent <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
<span class='fu'>stopOnError</span><span class='op'>(</span><span class='va'>result</span>, prefix <span class='op'>=</span> <span class='st'>"USER_INPUT_ERROR"</span><span class='op'>)</span>


<span class='co'># Truncating error message length</span>

<span class='kw'><a href='https://rdrr.io/r/base/try.html'>try</a></span><span class='op'>(</span><span class='op'>{</span>
  <span class='fu'>myFunc</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>userInput</span><span class='op'>)</span>
<span class='op'>}</span>, silent <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
<span class='fu'>stopOnError</span><span class='op'>(</span>
  <span class='va'>result</span>,
  prefix <span class='op'>=</span> <span class='st'>"USER_INPUT_ERROR"</span>,
  maxLength <span class='op'>=</span> <span class='fl'>40</span>,
  truncatedLength <span class='op'>=</span> <span class='fl'>32</span>
<span class='op'>)</span>

</pre>


  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jonathan Callahan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


